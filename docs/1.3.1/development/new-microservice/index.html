<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Apache Linkis Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Apache Linkis Blog Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="Apache Linkis" href="/opensearch.xml"><title data-react-helmet="true">How to Develop A New Microservice | Apache Linkis</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://linkis.incubator.apache.org/docs/1.3.1/development/new-microservice"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="How to Develop A New Microservice | Apache Linkis"><meta data-react-helmet="true" name="description" content="This article introduces how to develop, debug and deploy a new microservice in the local area based on the existing Linkis microservice architecture, so as to facilitate the need for logs of new applications."><meta data-react-helmet="true" property="og:description" content="This article introduces how to develop, debug and deploy a new microservice in the local area based on the existing Linkis microservice architecture, so as to facilitate the need for logs of new applications."><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://linkis.incubator.apache.org/docs/1.3.1/development/new-microservice"><link data-react-helmet="true" rel="alternate" href="https://linkis.incubator.apache.org/docs/1.3.1/development/new-microservice" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://linkis.incubator.apache.org/zh-CN/docs/1.3.1/development/new-microservice" hreflang="zh-CN"><link data-react-helmet="true" rel="alternate" href="https://linkis.incubator.apache.org/docs/1.3.1/development/new-microservice" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://AE29KQB3IA-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.43be7c54.css">
<link rel="preload" href="/assets/js/runtime~main.1fcf28a2.js" as="script">
<link rel="preload" href="/assets/js/main.1e191043.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo.png" alt="Apache Linkis Logo" class="themedImage_TMUO themedImage--light_4Vu1 navbar__logo"><img src="/img/logo.png" alt="Apache Linkis Logo" class="themedImage_TMUO themedImage--dark_uzRr navbar__logo"><b class="navbar__title">Apache Linkis(Incubating)</b></a><a class="navbar__item navbar__link" href="/download/main">Download</a><a class="navbar__item navbar__link" href="/community/how-to-subscribe">Community</a><a class="navbar__item navbar__link" href="/blog">Blog</a><a class="navbar__item navbar__link" href="/team">Team</a><a class="navbar__item navbar__link" href="/user">Users</a><a class="navbar__item navbar__link" href="/faq/main">FAQ</a><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link">ASF</a><ul class="dropdown__menu"><li><a href="https://www.apache.org/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Foundation</a></li><li><a href="https://www.apache.org/licenses/" target="_blank" rel="noopener noreferrer" class="dropdown__link">License</a></li><li><a href="https://www.apache.org/events/current-event" target="_blank" rel="noopener noreferrer" class="dropdown__link">Events</a></li><li><a href="https://www.apache.org/security/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Security</a></li><li><a href="https://www.apache.org/foundation/sponsorship.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Sponsorship</a></li><li><a href="https://www.apache.org/foundation/policies/privacy.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Privacy</a></li><li><a href="https://www.apache.org/foundation/thanks.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Thanks</a></li></ul></div></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link">Doc</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/latest/introduction">1.3.0</a></li><li><a class="dropdown__link" href="/docs/1.2.0/introduction">1.2.0</a></li><li><a class="dropdown__link" href="/docs/1.1.1/introduction">1.1.1</a></li><li><a class="dropdown__link" href="/docs/1.3.1/about/introduction">Next(1.3.1)</a></li><li><a class="dropdown__link" href="/versions">All Version</a></li></ul></div><a href="https://github.com/apache/incubator-linkis" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub"></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__link"><span><svg t="1631348384596" class="iconLanguage_EbrZ" viewBox="0 0 1024 1024" version="1.1" p-id="557" width="20" height="20"><path d="M547.797333 638.208l-104.405333-103.168 1.237333-1.28a720.170667 720.170667 0 0 0 152.490667-268.373333h120.448V183.082667h-287.744V100.906667H347.605333v82.218666H59.818667V265.386667h459.178666a648.234667 648.234667 0 0 1-130.304 219.946666 643.242667 643.242667 0 0 1-94.976-137.728H211.541333a722.048 722.048 0 0 0 122.453334 187.434667l-209.194667 206.378667 58.368 58.368 205.525333-205.525334 127.872 127.829334 31.232-83.84m231.424-208.426667h-82.218666l-184.96 493.312h82.218666l46.037334-123.306667h195.242666l46.464 123.306667h82.218667l-185.002667-493.312m-107.690666 287.744l66.56-178.005333 66.602666 178.005333z" fill="currentColor" p-id="558"></path></svg><span>English</span></span></a><ul class="dropdown__menu"><li><a href="/docs/1.3.1/development/new-microservice" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" style="text-transform:capitalize">English</a></li><li><a href="/zh-CN/docs/1.3.1/development/new-microservice" target="_self" rel="noopener noreferrer" class="dropdown__link" style="text-transform:capitalize">简体中文</a></li></ul></div><div class="searchBox_Bc3W"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button class="clean-btn backToTopButton_i9tI" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh menuWithAnnouncementBar_+O1J"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">About Linkis</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Quick Experience</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Deployment</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">User Guide</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Engine Usage</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Security Authentication</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">API</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Architecture</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Development</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.3.1/development/directory-structure">Directory Structure</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.3.1/development/build">How to Build</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.3.1/development/build-console">How to Build Console</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.3.1/development/build-docker">How to Build Docker Image</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.3.1/development/debug">Debug Guide</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.3.1/development/debug-with-helm-charts">Development &amp; Debugging with Kubernetes</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.3.1/development/new-engine-conn">Quickly Implement New Engine</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/1.3.1/development/new-microservice">How to Develop A New Microservice</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.3.1/development/swwager">Swagger Annotation</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.3.1/development/config">Configuration Parameters</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Development Specification</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Table Structure</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Tuning And Troubleshooting</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Upgrade Guide</a></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is unreleased documentation for Apache Linkis <b>Next(1.3.1)</b> version.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/docs/latest/introduction">latest version</a></b> (1.3.0).</div></div><div class="docItemContainer_oiyr"><article><span class="theme-doc-version-badge badge badge--secondary">Version: Next(1.3.1)</span><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>How to Develop A New Microservice</h1></header><blockquote><p>This article introduces how to develop, debug and deploy a new microservice in the local area based on the existing Linkis microservice architecture, so as to facilitate the need for logs of new applications.</p></blockquote><p>Mind mapping:</p><p><img alt="mind-Mapping" src="/assets/images/thinking-948d34864381dc87fee7be4172d45f0f.png"></p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="1-new-microservice-development"></a>1. New microservice development<a class="hash-link" href="#1-new-microservice-development" title="Direct link to heading">#</a></h2><blockquote><p>This article introduces the new microservice <code>linkis-new-microservice</code> as an example. How to create and register a new microservice belonging to linkis in IDEA</p></blockquote><p><strong>Software requirements</strong></p><ul><li>jdk1.8</li><li>maven3.5+</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="11-create-a-new-submodule"></a>1.1 Create a new submodule<a class="hash-link" href="#11-create-a-new-submodule" title="Direct link to heading">#</a></h3><p><strong>Note</strong>: The new sub-module under which module is not fixed and depends on the situation. Generally, it is divided and confirmed by service group. Here is just an example.</p><ul><li>Right click under the linkis-public-enhancements module</li></ul><p><img alt="new-module" src="/assets/images/new-module-26e83fefad1f10a0a966d67e1b9e7393.png"></p><ul><li>Select maven and click Nex to next step</li></ul><p><img alt="maven-module" src="/assets/images/maven-module-7c2c3c86d5321174cd0278a3de25b263.png"></p><ul><li>Enter the module name and click Finsh</li></ul><p><img alt="name-module" src="/assets/images/name-module-e405c145aa474f6467127afcd1816ccb.png"></p><ul><li>Created successfully</li></ul><p><img alt="created-successfully" src="/assets/images/created-successfully-38e7252c58c83c84c7d68b9f191f211a.png"></p><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_y2LR" id="111-modify-the-pomxml-file-of-the-linkis-new-microservice-module"></a>1.1.1 Modify the pom.xml file of the linkis-new-microservice module<a class="hash-link" href="#111-modify-the-pomxml-file-of-the-linkis-new-microservice-module" title="Direct link to heading">#</a></h4><p><strong>path</strong>: linkis-public-enhancements/linkis-new-microservice/pom.xml</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">## Add the public dependency module of linkis and the mybatis module dependency (if it does not involve database operations, you can not add mybatis)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  &lt;dependency&gt;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      &lt;groupId&gt;org.apache.linkis&lt;/groupId&gt;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      &lt;artifactId&gt;linkis-module&lt;/artifactId&gt;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      &lt;version&gt;${project.version}&lt;/version&gt;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      &lt;exclusions&gt;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &lt;exclusion&gt;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          &lt;groupId&gt;org.ow2.asm&lt;/groupId&gt;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          &lt;artifactId&gt;asm&lt;/artifactId&gt;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &lt;/exclusion&gt;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      &lt;/exclusions&gt;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  &lt;/dependency&gt;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  &lt;dependency&gt;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      &lt;groupId&gt;org.apache.linkis&lt;/groupId&gt;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      &lt;artifactId&gt;linkis-mybatis&lt;/artifactId&gt;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      &lt;version&gt;${project.version}&lt;/version&gt;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  &lt;/dependency&gt;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_y2LR" id="112-add-configuration-files-corresponding-to-new-services"></a>1.1.2 Add configuration files corresponding to new services<a class="hash-link" href="#112-add-configuration-files-corresponding-to-new-services" title="Direct link to heading">#</a></h4><blockquote><p>The configuration file is named according to linkis-service name.properties, and placed in the <code>linkis-dist/package/conf/</code> directory. When the service starts, the linkis.properties general configuration file and the linkis-service name.properties configuration file will be loaded</p></blockquote><p>Add <code>linkis-new-microservice.properties</code> configuration file</p><p><strong>path</strong>: linkis-dist/package/conf/linkis-new-microservice.properties</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI properties"><pre tabindex="0" class="prism-code language-properties codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain"># </span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Licensed to the Apache Software Foundation (ASF) under one or more</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># contributor license agreements.  See the NOTICE file distributed with</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># this work for additional information regarding copyright ownership.</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># The ASF licenses this file to You under the Apache License, Version 2.0</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># (the &quot;License&quot;); you may not use this file except in compliance with</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># the License.  You may obtain a copy of the License at</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># http://www.apache.org/licenses/LICENSE-2.0</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Unless required by applicable law or agreed to in writing, software</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># See the License for the specific language governing permissions and</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># limitations under the License.</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">#</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">## If you do not need to provide interface Api, you do not need to add this configuration</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">##restful</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">wds.linkis.server.restful.scan.packages=org.apache.linkis.newmicroservice.server.restful </span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">## mybatis Configuration of data manipulation items</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">wds.linkis.server.mybatis.mapperLocations=classpath*:org/apache/linkis/newmicroservice/server/dao/mapper/*.xml </span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">wds.linkis.server.mybatis.typeAliasesPackage=org.apache.linkis.newmicroservice.server.domain</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">wds.linkis.server.mybatis.BasePackage=org.apache.linkis.newmicroservice.server.dao</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">## Never use the same port as other services</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">spring.server.port=9208 </span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_y2LR" id="114-enable-debug-mode"></a>1.1.4 Enable debug mode<a class="hash-link" href="#114-enable-debug-mode" title="Direct link to heading">#</a></h4><blockquote><p>It is convenient to debug the interface, no need to verify the login status</p></blockquote><p><strong>path</strong>: linkis-dist/package/conf/linkis.properties</p><p><img alt="test-mode" src="/assets/images/test-mode-163484aba071f98ed856ee156166bb7f.png"></p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI properties"><pre tabindex="0" class="prism-code language-properties codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">wds.linkis.test.mode=true   # Turn on test mode</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">wds.linkis.test.user=hadoop # Specify which user to proxy all requests to in test mode</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="12-code-development"></a>1.2 Code Development<a class="hash-link" href="#12-code-development" title="Direct link to heading">#</a></h3><p>To make it easier for everyone to learn, let&#x27;s take creating a simple API interface as an example.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_y2LR" id="121-create-a-new-interface-class"></a>1.2.1 Create a new interface class<a class="hash-link" href="#121-create-a-new-interface-class" title="Direct link to heading">#</a></h4><p><img alt="new-microservice" src="/assets/images/new-microservice-04ed07325802304105f72dc8510543df.png"></p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">package org.apache.linkis.newmicroservice.server.restful;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import io.swagger.annotations.ApiOperation;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import org.apache.linkis.server.Message;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import org.springframework.web.bind.annotation.*;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import io.swagger.annotations.Api;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import java.util.HashMap;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import java.util.Map;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">@Api(tags = &quot;newmicroservice&quot;)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">@RestController</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">@RequestMapping(path = &quot;/newmicroservice&quot;)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">public class NewMicroservice {</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    @ApiOperation(value = &quot;establish&quot;, httpMethod = &quot;GET&quot;)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    @RequestMapping(path = &quot;establish&quot;, method = RequestMethod.GET)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public Message list() {</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        Map&amp;lt;String,String&amp;gt; map=new HashMap&amp;lt;&amp;gt;();</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        map.put(&quot;NewMicroservice&quot;,&quot;Hello! This is a new microservice I registered(这是我注册的一个新的微服务)&quot;);</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return Message.ok(&quot;&quot;).data(&quot;map&quot;, map);</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_y2LR" id="122-new-startup-class"></a>1.2.2 new startup class<a class="hash-link" href="#122-new-startup-class" title="Direct link to heading">#</a></h4><p><img alt="maven-module" src="/assets/images/start-up-e88d28789d35a7f7b150b11e8fddeef6.png"></p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">package org.apache.linkis.newmicroservice.server;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import org.apache.linkis.LinkisBaseServerApp;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import org.apache.commons.logging.Log;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import org.apache.commons.logging.LogFactory;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">public class LinkisNewMicroserviceApplication {</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  private static final Log logger = LogFactory.getLog(LinkisNewMicroserviceApplication.class);</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  public static void main(String[] args) throws ReflectiveOperationException {</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    logger.info(&quot;Start to running LinkisNewmicroserviceApplication&quot;);</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    LinkisBaseServerApp.main(args);</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  }</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="13-start-eureka-service"></a>1.3 Start eureka service<a class="hash-link" href="#13-start-eureka-service" title="Direct link to heading">#</a></h3><p>The specific guidelines for this step have been written in the <a href="/docs/1.3.1/development/debug">Debugging Guidelines</a> document and can be directly accessed, so I won’t introduce too much here</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="14-start-the-new-microservice-locally"></a>1.4 Start the new microservice locally<a class="hash-link" href="#14-start-the-new-microservice-locally" title="Direct link to heading">#</a></h3><p>Set the startup Application of linkis-new-microservice</p><p><img alt="commissioning-service" src="/assets/images/commissioning-service-5ee70b1a31fad5ecb05a50ada0852b12.png"></p><p>parameter explanation：</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI shell"><pre tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">Service Name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">linkis-new-microservice</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">Module Name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">linkis-new-microservice</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">VM Opitons</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">-DserviceName</span><span class="token operator">=</span><span class="token plain">linkis-new-microservice -Xbootclasspath/a:</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain">YourPathPrefix</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain">/incubator-linkis/linkis-dist/package/conf </span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">main Class</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">org.apache.linkis.newmicroservice.server.LinkisNewmicroserviceApplication</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">Add provided scope to classpath</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">By checking Include dependencies with “Provided” scope, you can introduce provided-level dependency packages during debugging.</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><blockquote><p>After the above settings are completed, the Application can be run directly. After running successfully, open the browser and enter the url of the eureka registration center</p></blockquote><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI text"><pre tabindex="0" class="prism-code language-text codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">    http://ip:port/ </span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><img alt="new-service" src="/assets/images/new-service-46a3f18549b7350fe0256802e49b7d8b.png"></p><blockquote><p>When the linkis-new-microservice service appears in the eureka registration center, the local registration of the new microservice is successful.</p></blockquote><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="15-postman-for-interface-debugging"></a>1.5 Postman for interface debugging<a class="hash-link" href="#15-postman-for-interface-debugging" title="Direct link to heading">#</a></h3><p><strong>URL</strong>: http://ip:port/api/rest_j/v1/newmicroservice/establish</p><p><img alt="postman-test" src="/assets/images/postman-test-9b60f0c78b3633bbda057e7b3b98e730.png"></p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="2-package-deployment"></a>2. Package deployment<a class="hash-link" href="#2-package-deployment" title="Direct link to heading">#</a></h2><blockquote><p>Packaging and deployment mainly has two stages. The first step is that after the module is packaged by maven, the dependencies required by the module will be packaged into the corresponding target directory of the module linkis-new-microservice/target/out/lib.
The second step is to assemble the complete final deployment installation package, you need to automatically copy <code>linkis-new-microservice/target/out/lib</code> to <code>linkis-dist/target/apache-linkis-x.x.x-incubating-bin/linkis - under package/lib</code></p></blockquote><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="21-modify-the-distributionxml-under-the-new-service"></a>2.1 Modify the distribution.xml under the new service<a class="hash-link" href="#21-modify-the-distributionxml-under-the-new-service" title="Direct link to heading">#</a></h3><p><strong>path</strong>: linkis-public-enhancements/linkis-new-microservice/src/main/assembly/distribution.xml</p><p><img alt="new-distribution" src="/assets/images/new-distribution-fcbc548f2892449c926e270afd2e4284.png"></p><blockquote><p>Since there are many dependencies that need to be excluded, only part of the code is posted here</p></blockquote><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI xml"><pre tabindex="0" class="prism-code language-xml codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">excludes</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(98, 114, 164)">&lt;!-- does not include --&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">           </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">exclude</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain">antlr:antlr:jar</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">exclude</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">           </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">exclude</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain">aopalliance:aopalliance:jar</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">exclude</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">           </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">exclude</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain">com.fasterxml.jackson.core:jackson-annotations:jar</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">exclude</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">           </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">exclude</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain">com.fasterxml.jackson.core:jackson-core:jar</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">exclude</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">excludes</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><blockquote><p>Here is an explanation of why you need to add <code>excludes</code>, because the service startup script linkis-dist/package/sbin/ext/linkis-common-start generally loads the general lib by default</p></blockquote><p><img alt="common-start" src="/assets/images/common-start-95438e917ec8cbf685cb7fba1e3cf438.png"></p><blockquote><p>Therefore, when packaging service dependencies, existing lib packages can be excluded. For details, please refer to linkis-computation-governance/linkis-entrance/src/main/assembly/distribution.xml</p></blockquote><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="22-modify-distributionxml-under-linkis-dist"></a>2.2 Modify distribution.xml under linkis-dist<a class="hash-link" href="#22-modify-distributionxml-under-linkis-dist" title="Direct link to heading">#</a></h3><p><strong>path</strong>: linkis-dist/src/main/assembly/distribution.xml</p><blockquote><p>Add fileSet configuration, changing the configuration is mainly to control the output linkis-new-microservice service package when compiling and packaging</p></blockquote><p><img alt="fileset" src="/assets/images/fileset-a5d335bf41188bfa1a893bf6fa6fb29c.png"></p><blockquote><p>Only the configuration content that needs to be added is posted here.</p></blockquote><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI xml"><pre tabindex="0" class="prism-code language-xml codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">fileSet</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">directory</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                ../linkis-public-enhancements/linkis-new-microservice/target/out/lib</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">directory</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">outputDirectory</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                linkis-package/lib/linkis-public-enhancements/linkis-new-microservice</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">outputDirectory</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">includes</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">include</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain">**/*</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">include</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">includes</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">fileSet</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="23-run-configuration-script-for-the-service"></a>2.3 Run configuration script for the service<a class="hash-link" href="#23-run-configuration-script-for-the-service" title="Direct link to heading">#</a></h3><p><img alt="new-configuration" src="/assets/images/new-configuration-15c913176102e31b92bbb10105387c35.png"></p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI text"><pre tabindex="0" class="prism-code language-text codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">#!/usr/bin/env bash</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">#</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Licensed to the Apache Software Foundation (ASF) under one or more</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># contributor license agreements.  See the NOTICE file distributed with</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># this work for additional information regarding copyright ownership.</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># The ASF licenses this file to You under the Apache License, Version 2.0</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># (the &quot;License&quot;); you may not use this file except in compliance with</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># the License.  You may obtain a copy of the License at</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># http://www.apache.org/licenses/LICENSE-2.0</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Unless required by applicable law or agreed to in writing, software</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># See the License for the specific language governing permissions and</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># limitations under the License.</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">#</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># description:  manager start cmd</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">#</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Modified for Linkis 1.0.0</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">export SERVER_SUFFIX=&quot;linkis-public-enhancements/linkis-new-microservice&quot;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">export SERVER_CLASS=org.apache.linkis.newmicroservice.server.LinkisNewMicroserviceApplication</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">#export DEBUG_PORT=</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">export COMMON_START_BIN=$LINKIS_HOME/sbin/ext/linkis-common-start</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">if [[ ! -f &quot;${COMMON_START_BIN}&quot; ]]; then</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    echo &quot;The $COMMON_START_BIN  does not exist!&quot;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    exit 1</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">else</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    sh $COMMON_START_BIN</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">fi</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="24-linkis-start-allsh-configuration-modification"></a>2.4 linkis-start-all.sh configuration modification<a class="hash-link" href="#24-linkis-start-allsh-configuration-modification" title="Direct link to heading">#</a></h3><p><strong>path</strong>: linkis-dist/package/sbin/linkis-start-all.sh</p><p><img alt="start-script" src="/assets/images/start-script-6f906207540e8a3734a626fa17fe6096.png"></p><blockquote><p>Only the configuration content that needs to be added is posted here.</p></blockquote><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI text"><pre tabindex="0" class="prism-code language-text codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">    ## startApp</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    #linkis-new-microservice</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    SERVER_NAME=&quot;new-microservice&quot; </span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    startApp</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><img alt="detection-script" src="/assets/images/detection-script-5c4fafb9b4781587f8b1c434f92d76b0.png"></p><blockquote><p>Only the configuration content that needs to be added is posted here.</p></blockquote><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI text"><pre tabindex="0" class="prism-code language-text codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">    ##checkServer</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    #linkis-new-microservice</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    SERVER_NAME=&quot;new-microservice&quot;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    checkServer</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="25-linkis-stop-allsh-configuration-modification"></a>2.5 linkis-stop-all.sh configuration modification<a class="hash-link" href="#25-linkis-stop-allsh-configuration-modification" title="Direct link to heading">#</a></h3><p><strong>path</strong>:linkis-dist/package/sbin/linkis-stop-all.sh</p><p><img alt="stop-script" src="/assets/images/stop-script-733ebc978f613ddcea3c70d0584176fd.png"></p><blockquote><p>Only the configuration content that needs to be added is posted here.</p></blockquote><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI text"><pre tabindex="0" class="prism-code language-text codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">    ## stopApp</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    #linkis-new-microservice</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    export SERVER_NAME=&quot;new-microservice&quot;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    stopApp</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="26-installation-package-preparation"></a>2.6 Installation package preparation<a class="hash-link" href="#26-installation-package-preparation" title="Direct link to heading">#</a></h3><p>The specific guidelines for this step have been written in the <a href="/docs/1.3.1/development/build">backend compilation</a> document and can be directly accessed, so I won’t introduce too much here</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="27-server-deployment"></a>2.7 Server Deployment<a class="hash-link" href="#27-server-deployment" title="Direct link to heading">#</a></h3><p>Here is an example of single-machine deployment, and the specific guidance of this step has been written in the <a href="/docs/1.3.1/deployment/deploy-quick">Single-machine deployment</a> document and can be accessed directly, so I won’t introduce it here</p><p>After the installation and deployment is successful, you can directly visit the eureka registration center in the browser to see if the center has successfully registered the linkis-new-microservice service. If the registration is successful, the creation of a new microservice is successful.</p><p><img alt="new-service" src="/assets/images/new-service-46a3f18549b7350fe0256802e49b7d8b.png"></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/apache/incubator-linkis-website/edit/dev/docs/development/new-microservice.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/1.3.1/development/new-engine-conn"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Quickly Implement New Engine</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/1.3.1/development/swwager"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Swagger Annotation »</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1-new-microservice-development" class="table-of-contents__link">1. New microservice development</a><ul><li><a href="#11-create-a-new-submodule" class="table-of-contents__link">1.1 Create a new submodule</a></li><li><a href="#12-code-development" class="table-of-contents__link">1.2 Code Development</a></li><li><a href="#13-start-eureka-service" class="table-of-contents__link">1.3 Start eureka service</a></li><li><a href="#14-start-the-new-microservice-locally" class="table-of-contents__link">1.4 Start the new microservice locally</a></li><li><a href="#15-postman-for-interface-debugging" class="table-of-contents__link">1.5 Postman for interface debugging</a></li></ul></li><li><a href="#2-package-deployment" class="table-of-contents__link">2. Package deployment</a><ul><li><a href="#21-modify-the-distributionxml-under-the-new-service" class="table-of-contents__link">2.1 Modify the distribution.xml under the new service</a></li><li><a href="#22-modify-distributionxml-under-linkis-dist" class="table-of-contents__link">2.2 Modify distribution.xml under linkis-dist</a></li><li><a href="#23-run-configuration-script-for-the-service" class="table-of-contents__link">2.3 Run configuration script for the service</a></li><li><a href="#24-linkis-start-allsh-configuration-modification" class="table-of-contents__link">2.4 linkis-start-all.sh configuration modification</a></li><li><a href="#25-linkis-stop-allsh-configuration-modification" class="table-of-contents__link">2.5 linkis-stop-all.sh configuration modification</a></li><li><a href="#26-installation-package-preparation" class="table-of-contents__link">2.6 Installation package preparation</a></li><li><a href="#27-server-deployment" class="table-of-contents__link">2.7 Server Deployment</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Linkis</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/latest/introduction">Document</a></li><li class="footer__item"><a class="footer__link-item" href="/faq/main">FAQ</a></li><li class="footer__item"><a href="https://github.com/apache/incubator-linkis/releases" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Releases<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/apache/incubator-linkis" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/apache/incubator-linkis/issues" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Issue Tracker<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/apache/incubator-linkis/pulls" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Pull Requests<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Subscribe Mailing List</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/community/how-to-subscribe">How to Subscribe</a></li><li class="footer__item"><a href="mailto:dev-subscribe@linkis.apache.org" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Subscribe Mail<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://lists.apache.org/list.html?dev@linkis.apache.org" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Mail Archive<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright"><div><img style="height:50px" alt="Apache Software Foundation" src="/img/incubator-logo.svg"><p style="color: #999999;  padding: 0 20px 30px;font-weight:400;text-align:left">Apache Linkis is an effort undergoing incubation at The Apache Software Foundation (ASF), sponsored by the Apache Incubator. Incubation is required of all newly accepted projects until a further review indicates that the infrastructure, communications, and decision making process have stabilized in a manner consistent with other successful ASF projects. While incubation status is not necessarily a reflection of the completeness or stability of the code, it does indicate that the project has yet to be fully endorsed by the ASF.</p><p></p>
             <p style="padding: 0 20px 30px;color: #999999;font-weight: 400;"> Copyright © 2022 The Apache Software Foundation. Licensed under the Apache License, Version 2.0. Apache Linkis, Apache Incubator, Apache, the Apache feather logo, the Apache Linkis logo and the Apache Incubator project logo are trademarks of The Apache Software Foundation.</p>
             <div></div></div></div></div></div></footer></div>
<script src="/assets/js/runtime~main.1fcf28a2.js"></script>
<script src="/assets/js/main.1e191043.js"></script>
</body>
</html>